<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shop.mapper">

<sql id="search_where">
<if test="search=='item_name' or search=='item_content'">
	where ${search} like '%' || #{keyword} || '%'	
</if> 
<if test="search=='all'">
	where item_name like '%' || #{keyword} || '%'
	or item_content like '%' || #{keyword} || '%'
</if>

</sql>


	<select id="total" resultType="Integer">
		select count(*)	
		from sell_item <include refid="search_where"/>
	</select>
	
	<select id="list" resultType="shop.ShopVO">
		select n.* 
		from (select rownum no, n.*
		from ( select * from sell_item <include refid="search_where"/> 
		order by item_num desc ) n
			order by no desc) n
			where no between #{beginList} and #{endList}
	</select>



</mapper>